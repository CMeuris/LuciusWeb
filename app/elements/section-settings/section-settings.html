<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">

<polymer-element
  name="section-settings"
  fit>

  <template>
    <link rel="stylesheet" href="section-settings.css">

    <!--
    version: version,
    url: 'http://ly-1-02:8090/jobs',
    queryString: 'context=compass&appName=interface&sync=true',
    classPath: 'luciusapi',
    sourireURL: 'http://wt-2-00:9999',
    hist2dNoise: 0,
    hist2dBins: 20,
    plotNoise: 3,
    histBins: 16,
    topComps: 25,
    hideInfo: false
    -->

    <div class="content" layout vertical>

      <div class="title">Visualization</div>
      <section>
        <div center horizontal layout>
          <div class="label">Plot Noise:</div>
          <paper-slider
            value="{{plotNoise}}"
            min="0" max="20"
            editable flex></paper-slider>
        </div>

        <div center horizontal layout>
          <div class="label">Hist2D Bins:</div>
          <paper-slider
            value="{{hist2dBins}}"
            min="8" max="80"
            editable flex></paper-slider>
        </div>

        <div center horizontal layout>
          <div class="label">Hist2D Noise:</div>
          <paper-slider
            value="{{hist2dNoise}}"
            min="0" max="20"
            editable flex></paper-slider>
        </div>

        <div center horizontal layout>
          <div class="label">Histogram Bins:</div>
          <paper-slider
            value="{{histBins}}"
            min="8" max="40"
            editable flex></paper-slider>
        </div>

        <div center horizontal layout>
          <div class="label">Top Comps:</div>
          <paper-slider
            value="{{topComps}}"
            min="5" max="50"
            editable flex></paper-slider>
        </div>
      </section>

      <div class="title">Server</div>
      <section layout vertical>
        <paper-input label="URL"
          value="{{url}}" floatinglabel></paper-input>
        <paper-input label="Query String"
          value="{{queryString}}" floatinglabel></paper-input>
        <paper-input label="Class Path"
          value="{{classPath}}" floatinglabel></paper-input>
        <paper-input label="Sourire URL"
          value="{{sourireURL}}" floatinglabel></paper-input>
      </section>

      <div class="title">Misc</div>
      <section>
        <p>
          Hide Coumpounds
          <paper-toggle-button id="hideinfo" checked?={{hideInfo}}></paper-toggle-button>
        </p>
      </section>

      <paper-button class="blue" on-click="{{handleSaveSettings}}">SAVE</paper-button>
    </div>

    <paper-toast id="toast" text="Settings saved. Reloading app..."></paper-toast>

  </template>

  <script>
    (function() {
      Polymer({
        url: '',
        queryString: '',
        classPath: '',
        sourireURL: '',
        hist2dNoise: 0,
        hist2dBins: 0,
        plotNoise: 0,
        histBins: 0,
        topComps: 0,
        hideInfo: false,

        ready: function() {
          this.url = app.settings.url;
          this.queryString = app.settings.queryString;
          this.classPath = app.settings.classPath;
          this.sourireURL = app.settings.sourireURL;
          this.hist2dNoise = app.settings.hist2dNoise;
          this.hist2dBins = app.settings.hist2dBins;
          this.plotNoise = app.settings.plotNoise;
          this.histBins = app.settings.histBins;
          this.topComps = app.settings.topComps;
          this.hideInfo = app.settings.hideInfo;
        },

        handleSaveSettings: function() {
          app.settings.url = this.url;
          app.settings.queryString = this.queryString;
          app.settings.classPath = this.classPath;
          app.settings.sourireURL = this.sourireURL;
          app.settings.hist2dNoise = this.hist2dNoise;
          app.settings.hist2dBins = this.hist2dBins;
          app.settings.plotNoise = this.plotNoise;
          app.settings.histBins = this.histBins;
          app.settings.topComps = this.topComps;

          app.settings.hideInfo = this.$.hideinfo.checked;

          localStorage.setItem('settings', JSON.stringify(app.settings));

          this.$.toast.show();

          setTimeout(function() {
            location.reload();
          }, 1000);
        }
      });
    })();
</script>
</polymer-element>
